{{/* theme-toggle â€“ Floating dark/light mode toggle button with localStorage
persistence. Input: none */}} {{define "theme-toggle"}}
<button
  class="theme-toggle-btn"
  id="theme-toggle-btn"
  aria-label="Toggle dark/light mode"
  onclick="toggleTheme()"
>
  <!-- Sun icon: shown when dark mode is active (click to go light) -->
  <i class="ri-sun-line icon-sun" style="font-size: 20px"></i>
  <!-- Moon icon: shown when light mode is active (click to go dark) -->
  <i class="ri-moon-line icon-moon" style="font-size: 20px"></i>
</button>
<script>
  (function () {
    var btn = document.getElementById("theme-toggle-btn");
    var stored = localStorage.getItem("platify-theme");
    if (stored) {
      document.documentElement.setAttribute("data-theme", stored);
    }
    updateThemeIcon();

    function updateThemeIcon() {
      var isDark =
        document.documentElement.getAttribute("data-theme") === "dark" ||
        (!document.documentElement.getAttribute("data-theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches);
      btn.querySelector(".icon-sun").style.display = isDark ? "block" : "none";
      btn.querySelector(".icon-moon").style.display = isDark ? "none" : "block";
    }

    window.toggleTheme = function () {
      var current =
        document.documentElement.getAttribute("data-theme") ||
        (window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light");
      var next = current === "dark" ? "light" : "dark";
      document.documentElement.setAttribute("data-theme", next);
      localStorage.setItem("platify-theme", next);
      updateThemeIcon();
    };
  })();
</script>
{{end}}
