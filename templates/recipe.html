<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{.Name}} â€“ Platify</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="detail-page">

      <!-- Hero image -->
      <div class="detail-hero">
        <div class="gradient"></div>
        {{if .Image}}
          <img src="{{.Image}}" alt="{{.Name}}" />
        {{else}}
          <div class="placeholder-img">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width:64px;height:64px;opacity:.3">
              <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 002-2V2M7 2v20M21 15V2a5 5 0 00-5 5v6c0 1.1.9 2 2 2h3m0-10v10"/>
            </svg>
          </div>
        {{end}}
      </div>

      <!-- Body -->
      <div class="detail-body">
        <h1>{{.Name}}</h1>

        <!-- Tags -->
        {{if or .Boards .Tags}}
        <div class="tag-list">
          {{range .Boards}}
          <span class="tag-chip board">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
            {{.}}
          </span>
          {{end}}
          {{range .Tags}}
          <span class="tag-chip colored" style="--chip-color:{{.LightColor}}">
            <span class="dot"></span>
            {{.Name}}
          </span>
          {{end}}
        </div>
        {{end}}

        {{if .Description}}
        <p class="description">{{.Description}}</p>
        {{end}}

        <!-- Sections -->
        {{range .Sections}}
        <div class="recipe-section">
          {{if and (eq .Title "Ingredients") .Ingredients}}
            <h2>Ingredients</h2>
            {{range .Ingredients}}
            <div class="ingredient-item">
              {{$qty := formatQty .Quantity .Unit}}
              {{if $qty}}<span class="ingredient-qty">{{$qty}}</span>{{end}}
              <span class="ingredient-name">{{.Name}}</span>
            </div>
            {{end}}
          {{else if and (eq .Title "Nutrition") .Items}}
            <h2>Nutrition</h2>
            <table class="nutrition-items">
              <thead>
                <tr>
                  <th>Ingredient</th>
                  <th>kcal</th>
                  <th>Carbs</th>
                  <th>Protein</th>
                  <th>Fat</th>
                </tr>
              </thead>
              <tbody>
                {{range .Items}}
                <tr>
                  <td>{{.Name}}</td>
                  <td>{{formatFloat .Nutrients.Energy}}</td>
                  <td>{{formatFloat .Nutrients.Carbs}}g</td>
                  <td>{{formatFloat .Nutrients.Proteins}}g</td>
                  <td>{{formatFloat .Nutrients.Fats}}g</td>
                </tr>
                {{end}}
              </tbody>
            </table>
          {{else if and (eq .Title "Directions") .Directions}}
            <h2>Directions</h2>
            {{range $i, $d := .Directions}}
            <div class="direction-step">
              <div class="step-number">{{inc $i}}</div>
              <div>
                {{if $d.Heading}}<div class="step-heading">{{$d.Heading}}</div>{{end}}
                <div class="step-text">{{$d.Text}}</div>
              </div>
            </div>
            {{end}}
          {{else if .VideoLink}}
            <h2>{{.Title}}</h2>
            <div class="video-container">
              <iframe src="{{.VideoLink}}" allowfullscreen></iframe>
            </div>
          {{else if .List}}
            <h2>{{.Title}}</h2>
            {{range .List}}
            <div class="shopping-item">{{.Name}}</div>
            {{end}}
          {{else}}
            <h2>{{.Title}}</h2>
          {{end}}
        </div>
        {{end}}
      </div>
    </div>

    <!-- Footer badge -->
    <div class="platify-footer">
      <a href="/" class="badge">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M21 2V22H19V14H16V7C16 4.23858 18.2386 2 21 2ZM9 13.9V22H7V13.9C4.71776 13.4367 3 11.419 3 9V3H5V10H7V3H9V10H11V3H13V9C13 11.419 11.2822 13.4367 9 13.9Z"/>
        </svg>
        Shared from Platify
      </a>
    </div>
  </body>
</html>
